<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TicoRides</title>
    <link rel="stylesheet" href="style.css">
    <script>
        function RegUsuario(namusuario,Contraseña,tel,nombre,apellidos){
            this.NamUsuario = namusuario;
            this.Contraseña = Contraseña;
            this.Telefono = tel;
            this.Nombre = nombre;
            this.Apellidos = apellidos;
            this.Viajes = new Array();
        };
        function guardar_localstorage(){
            if(sessionStorage.getItem("Usuarios") != null){
                var usuarios = new Array();
                usuarios = JSON.parse(sessionStorage.getItem( "Usuarios" ));
                let nombre = document.getElementById("name").value;
                let apellidos = document.getElementById("last name").value;
                let telefono = document.getElementById("cellphone").value;
                let NamUsuario = document.getElementById("username").value;
                let Contraseña = document.getElementById("password").value;
                var usuario = new RegUsuario(NamUsuario,Contraseña,telefono,nombre,apellidos);
                usuarios.push(usuario);
                sessionStorage.setItem("Usuarios",JSON.stringify(usuarios));
            }else{
                let nombre = document.getElementById("name").value;
                let apellidos = document.getElementById("last name").value;
                let telefono = document.getElementById("cellphone").value;
                let NamUsuario = document.getElementById("username").value;
                let Contraseña = document.getElementById("password").value;
                var usuario = new RegUsuario(NamUsuario,Contraseña,telefono,nombre,apellidos);
                var usuarios = new Array();
                usuarios[usuarios.length] = usuario;
                sessionStorage.setItem("Usuarios",JSON.stringify(usuarios));
                
            }
        }
       
        function validar(id){
            if(validarNomUsuario() == true){
                if(document.getElementById("password").value === document.getElementById("ReContraseña").value && document.getElementById("ReContraseña").value !== "" && document.getElementById("password").value !== ""){
                        guardar_localstorage()
                        setAction(id)
                        return true;
                }else{ 
                    return false;
                    alert("la contraseña no coincide")
                }
            }else{
                alert("ese nombre de usuario ya esta en uso")
                return false;
            }//*/
        }
        function validarNomUsuario(){
            var usuarios = new Array();
                usuarios = JSON.parse(sessionStorage.getItem( "Usuarios" ));
            if(sessionStorage.getItem("Usuarios") != null){
                for(let i = 0;i < usuarios.length;i++){
                    if( document.getElementById("username").value == usuarios[i].NamUsuario){
                        return false;
                    }else{
                        return true;
                    }
                }
            }else{
                return true;
            }
        }
        function setAction(form) {
                form.action = "C:/Users/wilcr/OneDrive/Escritorio/UTN Software/Diseño de aplicaciones web/Programas/Proyecto 1/Login/login.html";
            return false;
        }
    </script>
</head>
<body>
    <h1>Registrate</h1>
    <form id="form1" onsubmit="validar(this),document.getElementById('form1').reset()" ><!--action="C:\Users\wilcr\OneDrive\Escritorio\UTN Software\Diseño de aplicaciones web\Programas\Proyecto 1\Dashboar\dashboar.html"-->
    <label for="name">Nombre</label><br><input required type="text" name="nombre" id="name"><br>
    <label for="last name">Apellidos</label><br><input required type="text" name="apellidos" id="last name"><br>
    <label for="cellphone">Telefono</label><br><input required type="text" name="telefono" id="cellphone"><br>
    <label for="username">Nombre de usuario</label><br><input required type="text" name="nombre de usuario" id="username"><br>
    <label for="password">Contraseña</label><br><input required type="password" name="Contraseña" id="password"><br>
    <label for="confirm password">Repita su contraseña</label><br><input required type="password" name="com contraseña" id="ReContraseña"><br>
    <p>¿Ya tienes una cuenta? <a href="C:\Users\wilcr\OneDrive\Escritorio\UTN Software\Diseño de aplicaciones web\Programas\Proyecto 1\Login\login.html">Acceder a la cuenta</a></p>
    <input type="submit" value="Registro"  id="btnregistro">
    </form>
</body>
</html>